# Accessibility Data Table
## 개요
> 현재 서비스 중인 웹 페이지를 선정하여, 데이터 테이블에 대해 높은 접근성을 가지도록 개선한다.

### 진행 과정
1. 현재 서비스 중인 웹페이지 중, 접근성이 좋지 않은 테이블이 있는 **웹 페이지를 선정**한다.
2. 웹 표준, 웹 접근성 관점에서 **문제점을 분석**한다.
3. WCAG 가이드 라인에 맞춰 **수정 계획을 수립**한다.
4. 웹 접근성 관련 **체크 리스트를 작성**한다.
5. HTML/CSS를 활용하여 **구현**한다. (JS는 선택사항)
6. **문법 검사**를 한다.
7. lighthouse를 사용하여 **접근성 및 SEO를 분석**한다.
8. **후기 및 회고를 작성**한다.
9. (추가)피드백을 듣고 **개선**한다
<br>

## 1. 웹페이지 선정

- **선정 페이지 :** [워크재활의학과병원 / 진료안내 / 진료시간표](http://www.walkrehab.co.kr/main/sub.html?pageCode=15)
<br>

## 2. 문제점 분석
1. **각각의 표에 대한 정보가 제공되지 않는다.**
2. **테이블의 모든 데이터가 `<td>`로 구성되어 있다.**
3. **중복되는 내용이 계속해서 반복된다.**
    - **진료 과목명 :** 재활의학과, 내과
    - **요일 :** 월/화/수/목/금/토
4. **내용이 비어 있는 셀을  ` `(`&nbsp;`, 공백)으로 표현하였다.**
5. `**<html>` 요소에 `leng` 속성이 제공되지 않는다.**
6. **배경색과 전경생의 명암비가 충분하지 않다.**

<br>

## 3. 수정 계획 수립

> **WCAG 가이드 라인([참고](https://www.w3.org/WAI/WCAG21/quickref/?currentsidebar=%23col_overview&technologies=wai-aria%2Cserver%2Csmil%2Cpdf%2Cflash%2Csl#text-alternatives))을 따르고 있다.**
> 

**지침 2.1에 따라, 색깔만을 사용하여 정보를 전달하는 부분이 없도록 수정한다.**

**지침 2.4에 따라, 사용자가 탐색, 콘텐츠 찾기 및 위치 확인을 지원하는 방법을 제공한다.**

### 3-1. 마크업

※ UI 수정은 최대한 줄이기 위해 몇 가지 사항 취소.

1. 표에 대한 ~~(눈에 보이는)제목 및~~ 요약을 제공한다.
2. ~~원장명에 따라 8개로 나누어진 표를 진료과목에 따라 4개(재활의학과, 내과, 정형외과, 신경외과)의 표로 나눈다.~~
3. ~~표의 최상단에 진료명을 표기하고, 원장, 시간, 월, 화, 수, 목, 금, 토로 구분한다.~~
4. 각각의 표에 대한 `<caption>` 속성을 제공한다.
    
    "OO과 OOO 원장, 시간, 월, 화, 수, 목, 금, 토, 오전, 오후로 구성."
    
5. 진료과목 및 원장, 요일, 오전/오후를 `<th>`로 구분한다.
6. 내용이 비어있는 셀은 접근성을 위해 "진료 없음"을 입력해 둔다.

### 3-2. CSS

1. ~~색상은 기존 표의 색상을 활용한다.~~
    
    재활의학과와 휴진은 배경색과 전경색의 충분한 명암비를 위해 색상을 변경한다.
    
    나머지는 그대로 쓴다.
    
2. ~~표에 대한 선 스타일을 설정한다.~~
    
    ~~※ 오전, 오후 사이의 선 스타일을 점선으로 변경한다.~~
    
3. "진료 없음"으로 표기한 셀을 웹 접근성을 고려하여 화면에서 가린다.
4. 화면 크기(최대/최소 800px, 최소 450px)에 따라 표의 크기를 변경하여 작은 화면에서도 전체를 볼 수 있게 한다.

### 3-3. 레이아웃

- **현재(최신)**
    
    ![https://user-images.githubusercontent.com/77854486/138724549-a82ec315-4d86-4a69-bd8f-9481d1320d4e.png](https://user-images.githubusercontent.com/77854486/138724549-a82ec315-4d86-4a69-bd8f-9481d1320d4e.png)
    
- **이전**
    
    ![https://user-images.githubusercontent.com/77854486/135838091-6b791504-a8cb-4383-9b72-4552cc4350d7.png](https://user-images.githubusercontent.com/77854486/135838091-6b791504-a8cb-4383-9b72-4552cc4350d7.png)

<br>

## 4. 체크 리스트

- [x]  테이블에 대한 제목을 제공하였는가
- [x]  테이블에 대한 설명을 제공하였는가
- [x]  테이블이 구조, 그룹화 되어 있는가
- [x]  `<th>`에 `scope` 속성이 지정되어 있는가
- [x]  내용이 비어있는 셀(`th`)은 없는가
- [x]  셀(`th`)이 잘 구분되어 있는가
- [x]  콘텐츠를 보는 것에 지장이 없는가
- [x]  불필요하게 사용되는 태그, 속성은 없는가
- [x]  `<meta>` 요소에 `description`을 추가한다.
- [x]  배경색과 명암색의 전경비를 개선한다.

<br>

## 5. 구현

**Github 링크 :** [https://github.com/Im-hass/accessibility_data_table](https://github.com/Im-hass/accessibility_data_table)
<br>

## 6. 문법 검사

### HTML Markup 검사

> [검사기](https://validator.w3.org/nu/)
> 

검사 결과 `<script>` 태그의 `type` 속성에 `javascript`에 대해 알릴 필요가 없다고 한다.

HTML5부터 별다른 값이 없으면 자바스크립트를 실행할 수 있도록 기본 값으로 지정되어 있다.

Internet Explorer, Edge, 구글 크롬 등 대부분의 브라우저들이 자바스크립트를 기본 스크립트 엔진으로 채택하기 때문이다.

그러나 자바스크립트가 아닌 다른 스크립트를 기본 값으로 실행하는 브라우저가 있다면 페이지에 오류가 발생할 수도 있다.

이 때문에 하위 호환성을 위해 속성을 붙이는 것을 권장한다.

- [참고](https://jootc.com/p/201807211401)

![https://user-images.githubusercontent.com/77854486/135916502-34e87c4f-b725-4757-9013-363edba24949.png](https://user-images.githubusercontent.com/77854486/135916502-34e87c4f-b725-4757-9013-363edba24949.png)

### CSS 유효성 검사

- [검사기](http://www.css-validator.org/validator.html.ko)

![https://user-images.githubusercontent.com/77854486/135916036-8122d584-d30c-45b5-8da9-90f0a31a74f3.png](https://user-images.githubusercontent.com/77854486/135916036-8122d584-d30c-45b5-8da9-90f0a31a74f3.png)

### W3C 통합 검사기

> [검사기](https://validator.w3.org/unicorn/)
> 
- **최신 결과**
    - 사용하지 않는 속성(`clip-path`) 제거
    
    ![https://user-images.githubusercontent.com/77854486/138727488-9c22f2b2-6590-4cfb-98a1-f299687545aa.png](https://user-images.githubusercontent.com/77854486/138727488-9c22f2b2-6590-4cfb-98a1-f299687545aa.png)
    
- **이전 결과**
    
    ![https://user-images.githubusercontent.com/77854486/135917441-f412bb39-f75c-4467-af27-9d11752ad9ab.png](https://user-images.githubusercontent.com/77854486/135917441-f412bb39-f75c-4467-af27-9d11752ad9ab.png)

<br>

## 7. lighthouse 접근성 및 SEO 분석

### 분석 결과

> **성능, 접근성, 모범 사례, 검색 엔진 최적화 4개의 항목**을 검사한다.
> 
- **성능(Performance) :** 페이지 로딩 속도 및 개선 방법
    
    성능에서는 기본적으로 6가지 항목의 속도를 측정한다 + (측정된 속도)
    
    - **최초 콘텐츠풀 페인트(FCP) :** 사용자가 감지하는 로드 속도. FCP가 빠르면 사용자가 페이지에서 뭔가가 진행되고 있음을 인지 ⇒ 0.5s
    - **인터랙티브 시간(TTI) :** 상호 작용(사용 가능)까지의 시간 ⇒ 0.5s
    - **속도 지수(SI) :** 로드 중에 콘텐츠가 시각적으로 표시되는 속도 ⇒ 0.5s
    - **총 차단 시간(TBT) :** 페이지가 안정적인 상호 작용 환경이 되기 전, 상호 작용이 불가능할 때의 심각성 ⇒ 0s
    - **최대 콘텐츠풀 페인트(LCP) :** 사용자가 감지하는 로드 속도. LCP가 빠르면 사용자가 해당 페이지를 [사용할 수 있다](https://web.dev/user-centric-performance-metrics/#questions)고 인지 ⇒ 0.5s
    - **누적 레이아웃 이동(CLS) :** 사용자가 예상치 못한 레이아웃 이동을 경험하는 빈도 ⇒ 0
- **접근성(Accessibility) :** 페이지 접근성 개선 기회 확인
    
    배경색과 전경색의 명암비, `<title>`, `lang` 등 요소, 속성의 유무, 적절한 속성 값이 사용되었는지 등을 검사한다.
    
    또한 접근성은 수동으로 확인해야 할 추가 항목이 있었다(본 사이트에는 거의 해당되지 않았다).
    
    **수동으로 검사해야 하는 항목**
    
    1. **페이지에 논리적 탭 순서가 있는가**
        
        탭을 이용해 시각적 레이아웃을 따라간다.
        
    2. **대화형 컨트롤은 키보드로 포커스가 가능한가**
        
        사용자 지정 대화형 컨트롤은 키보드 포커스가 가능하고 포커스 표시기를 표시한다.
        
    3. **대화형 요소는 목적과 상태를 나타내는가**
        
        링크 및 버튼과 같은 대화형 요소는 해당 상태를 나타내야 하고, 비대화형 요소와 구분할 수 있어야 한다.
        
    4. **사용자의 초점이 페이지에 추가된 새 콘텐츠로 이동 되는가**
        
        새 콘텐츠가 페이지에 추가될 때마다 사용자의 초점이 해당 콘텐츠로 향해야 한다.
        
    5. **사용자 포커스가 특정 영역에 갇혀 있지 않는가**
        
        키보드 포커스가 특정 페이지 요소에 잠기거나 트랩 되어서는 안 된다. 키보드만으로 모든 페이지의 요소를 탐색할 수 있어야 한다.
        
    6. **사용자 지정 컨트롤에 연결된 레이블이 있는가**
        
        사용자 지정 대화형 컨트롤에는 `aria-label` 또는 `aria-labelledby`에서 제공하는 관련 레이블이 있어야 한다.
        
    7. **사용자 지정 컨트롤에 ARIA 역할이 있는가**
        
        사용자 지정 대화형 컨트롤에는 적절한 ARIA 역할이 있다.
        
    8. **페이지의 시각적 순서는 DOM 순서를 따르는가**
        
        DOM 순서가 시각적 순서와 일치 시키고 보조 기술 탐색을 개선한다.
        
        (선정한 페이지는 시각적 순서와 DOM 순서가 일치하지 않았다)
        
    9. **오프스크린 콘텐츠\*는 보조 기술에서 숨겨져 있는가**
        
        페이지의 관련 부분만 화면 판독기 및 기타 보조 기술에 노출되도록한다. 스크린 리더를 사용하여 테스트할 수 있다.
        
        **※ 오프스크린 콘텐츠(Offscreen content) :** 화면 밖에 있거나 프레젠테이션에 불과한 콘텐츠.
        
    10. **HTML5 랜드마크 요소\*가 사용 되었는가**
        
        랜드마크 요소는 보조 기술 페이지의 키보드 탐색을 개선하는데 사용된다.
        
        **※ HTML5 랜드마크 요소 :** [ARIA 랜드마크 요소 참고](https://www.w3.org/TR/2017/NOTE-wai-aria-practices-1.1-20171214/examples/landmarks/HTML5.html)
        
- **모범 사례(Best Practices) :** 페이지 URL에 HTTPS 사용 여부 등과 같은 Google의 모범 사례 준수 여부 확인
    
    CSP가 XSS 공격에 효과적인지를 확인한다. 해당 사이트에는 HTTPS가 사용되지 않아서 기본적으로 통과하였다.
    
- **검색 엔진 최적화(SEO) :** 웹 검색 결과 순위에 맞게 페이지가 얼마나 잘 최적화되어 있는지 확인
    
    `<meta>` 요소 중 `viewport`, `description` 등이 있는가, `<title>` 요소가 있는가 등을 검사한다.
    
    기존에는 `<meta>` 요소 중 `description` 속성이 없어서 SEO 점수가 낮게 나왔었다. 이번에 추가해 주었다.
    
    `description`은 각 페이지에 대한 고유한 설명을 사용하고, 설명을 명확하고 간결하게 표현하며 모호한 설명은 피해야 한다.
    
- **최신 결과**
    
    ![https://user-images.githubusercontent.com/77854486/138727859-25f1a678-6de2-4aa3-9fb1-446f94cccdf0.png](https://user-images.githubusercontent.com/77854486/138727859-25f1a678-6de2-4aa3-9fb1-446f94cccdf0.png)
    
- **이전 결과**
    
    ![https://user-images.githubusercontent.com/77854486/135919052-03b75313-4888-457a-aff5-89298a4c33a9.png](https://user-images.githubusercontent.com/77854486/135919052-03b75313-4888-457a-aff5-89298a4c33a9.png)
    
- [참고](https://support.wix.com/ko/article/google-lighthouse-pagespeed-insights를-사용해-사이트-성능-측정하기#google-lighthouse)

<br>

## 8. 회고

접근성이 좋지 않은 웹 페이지를 찾는 것은 쉬웠으나, 데이터 테이블이 있는 것을 찾으려니 조금 어려움이 있었다. 대부분 비슷하게 만들어져 있었고, 그 중 접근성이 떨어지는 것을 위주로 선정하였다.

table이 복잡해지면 `scope`와 `id`, `header` 속성을 적절히 이용하여 정보를 주는 것이 좋다고 하는데... 이 부분을 제대로 구현 못 한 것이 조금 아쉽다. 시도는 해보았지만, 전부 `id`로 쓰게 된다 거나... 아직 세 가지를 적절히 사용하는 것에 미흡한 부분이 있다.

여러 복잡한 모양의 테이블들을 보며 조금 더 다양하게 만들어 볼 필요성을 느꼈다. 그리고 꼭 하나의 테이블로 합쳐서 만들어야겠다고 생각하였는데, 스크린 리더로 읽기에는 불편해 보이지만 따로 따로 만들어 둔 것이 눈으로 보기에는 편한 것 같다.

처음에는 더 보기 편하게 진료, 휴진을 O, X로 표현할까 하였지만 한글로 보는 것이 어르신들은 편하다는 주변 의견이 있어서 반영하였다.

이번 프로젝트를 통해 처음으로 스크린 리더를 사용해 보는 기회가 생겼는데, 이걸 쓰는 사람들이 얼마나 웹 사용에 불편함을 겪을 지 직접 알게 되었다. 디테일하게 어떤 부분이 어떻게 만들어져야 할지 감이 잡히는 것 같다.

또한 비어 있는 셀에 대한 처리나, WCAG 가이드 등을 찾아보며 생각지도 못 한 부분에서 웹 사용에 어려움이 생길 수 있다는 것을 알 수 있었다.

아쉬운 점은 분석 결과는 굉장히 좋게 나왔으나... 스크린 리더로 읽기에 내 데이터 테이블이 그렇게 좋다고 느껴지지는 않았다. 스크린 리더 사용에 익숙하지 않은 것도 있겠지만, 대체 이걸 듣고 어떻게 이해할 수 있지? 싶은 생각이 조금 들었다.

물론 예시로 잘 만들어진 우체국 페이지도 듣기 좋은건 아니었다... 그런데 그 표는 세로 th, 가로 th를 꼭 먼저 읽어주고 td를 읽어주었는데, 이게 잘 반영이 안 되는 것 같다.

복잡한 테이블이라 그런가 싶어 id, header 속성으로 해보았는데도 먹히지 않는 것은 도대체 왜... 방법을 조금 더 찾아볼 필요가 있다.

추가로 Github Page branch가 꼬여서 고생을 몇 번 한 적이 있는데, 이번에 주구장창 쓰게 되며 사용이 조금 능숙해 진 것 같아서 뿌듯하다. 너무 남발한 것 같아서 조금 자제해야겠다는 생각이 들었다. 제발, 진짜 완성되었다 싶을 때 올리길...

---

몇 가지 사항을 개선해보며 협업할 때 소통의 중요성을 먼저 느낄 수 있었다.

개선한다고 생각해서 스스로 UI를 바꿔 버리는 것이 협업에 있어서 좋은 것은 아니었다. 개선할 때도 소통하기!!... `<thead>`, `<tbody>`로 보기 좋게 나눠보고 싶었는데 선정한 테이블이 너무 심플한 테이블인 점이 조금 아쉬웠다.

그리고 웹 접근성을 생각해서 배경색, 전경색 명암비를 높여줘야 했는데, 개선은 하고 싶은데 디자이너가 아니다 보니 색상을 정하는게 힘들었다. 다행히 좋은 사이트를 발견해서 한 번 바꿔 보았다.

그리고 크롬에서 색맹이 아닌 사람이 테스트할 수 있도록 Chrome Devtool에서 애뮬레이터를 제공해 주었다!! 자주 사용할 것 같아서 다음에 블로그에 사용 방법을 올려두어야겠다.

lighthouse 전부 100점으로 만드니까 화면도 검정색으로 바뀌고 폭죽도 펑펑 터트려 주는게 귀여운 것 같다. 뿌듯함을 느끼게 해주려는 듯... ㅎㅎ 간단한 페이지니까 쉬웠겠지만... 다음엔 통신이랑 WARI가 들어간 페이지로 도전해 보겠다.

<br>
